(this.webpackJsonpbooks=this.webpackJsonpbooks||[]).push([[0],{142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(29),r=a.n(i),c=(a(48),a(10)),l=(a(49),a(50),a(30)),s=a.n(l),u=a(31),d=a.n(u),m=a(146);var f,h=Object(m.a)()((function(e){var t=e.t,a=e.bookList,n=e.onBookClick;return o.a.createElement("ul",{className:"BookList-BookList"},a.map((function(e){var a=e.id,i=e.title,r=e.author,c=e.year,l=e.donation,u=e.epub;return o.a.createElement("li",{key:a},o.a.createElement("div",{className:"BookList-Book"},o.a.createElement("a",{href:"/",className:"BookList-Link",onClick:function(t){t.preventDefault(),n&&n(e)}},o.a.createElement("strong",{className:"BookList-Title"},i),t("by"),o.a.createElement("em",{className:"BookList-Author"},r)," - ",o.a.createElement("small",{className:"BookList-Year"},c)),u&&o.a.createElement("a",{href:u,title:t("BookList.epub.link.text"),className:"BookList-Action"},o.a.createElement("img",{src:d.a,className:"BookList-Icon",width:"24",height:"24",alt:t("BookList.epub.icon.alt")}),t("BookList.epub.link.text")),l&&o.a.createElement("a",{href:l,title:t("BookList.donate.link.text"),className:"BookList-Action",target:"_blank",rel:"noopener noreferrer"},o.a.createElement("img",{src:s.a,className:"BookList-Icon",width:"24",height:"24",alt:t("BookList.donate.icon.alt")}),t("BookList.donate.link.text"))))})))})),p=a(36).a||".";a(57);var k=a(37),b=a.n(k);var g=Object(m.a)()((function(e){var t=e.t,a=e.bookId,i=e.idx,r=e.opened,l=void 0!==r&&r,s=e.title,u=e.onChapterOpened,d=Object(n.useState)(),m=Object(c.a)(d,2),f=m[0],h=m[1],k=function(){f||(h(t("Chapter.loading")),function(e,t){return fetch("".concat(p,"/data/books/").concat(e,"/chapter-").concat(t+1,".md")).then((function(e){return e.text()})).catch((function(e){return e}))}(a,i).then((function(e){return h(e)})),u&&u(i))};return l&&k(),o.a.createElement("article",{className:"Chapter"},o.a.createElement("details",{open:l},o.a.createElement("summary",{onClick:k,className:"Chapter-Summary"},o.a.createElement("h2",{className:"Chapter-Title"},t("Chapter.title")," ",i+1," : ",s)),o.a.createElement("div",{className:"Chapter-Content"},o.a.createElement(b.a,{source:f}))))})),v=function(e){var t=window.location.search.replace(/\?/,"").split("&").find((function(t){return t.startsWith("".concat(e,"="))}));if(t){var a=t.split("=");return a&&2===a.length?a[1]:void 0}};function E(e){var t=e.book,a=t.id,n=t.title,i=t.chapters,r=function(e){!function(e){var t=e.id,a=e.title,n=e.idx;window.history.pushState({},a,"?book=".concat(t,"&chapter=").concat(n))}({id:a,title:n,idx:e})},c=v("chapter");return o.a.createElement("main",null,i.map((function(e,t){return o.a.createElement(g,{key:t,bookId:a,idx:t,title:e,onChapterOpened:r,opened:c&&parseInt(c,10)===t})})))}var w=a(38),B=a.n(w);a(142);var L=Object(m.a)()((function(e){var t=e.t;return o.a.createElement("header",{className:"Header"},o.a.createElement("img",{src:B.a,className:"Header-Logo",alt:t("Header.logo.alt"),width:"64",height:"64"}),o.a.createElement("h1",null,t("Header.title")))})),N=(a(143),a(39)),C=a.n(N);var y=Object(m.a)()((function(e){var t=e.t,a=e.title,n=e.onBackClick;return o.a.createElement("header",{className:"Header-Minified"},o.a.createElement("a",{href:"/",title:t("HeaderMinified.link.text"),className:"Header-Back",onClick:function(e){e.preventDefault(),n&&n()}},o.a.createElement("img",{src:C.a,alt:t("HeaderMinified.icon.lat"),width:"20",height:"20"})),o.a.createElement("h1",{className:"Header-Book-Title"},a))}));a(144);var x=Object(m.a)()((function(e){var t=e.t;return o.a.createElement("footer",{className:"Footer"},o.a.createElement("details",null,o.a.createElement("summary",null,o.a.createElement("h4",{className:"Footer-Title"},t("Footer.title"))),o.a.createElement("ul",{className:"Footer-List"},o.a.createElement("li",null,t("Footer.icons"),t("by"),o.a.createElement("a",{href:"http://ikons.piotrkwiatkowski.co.uk/"},"Piotr Adam Kwiatkowski")),o.a.createElement("li",null,o.a.createElement("a",{href:"https://github.com/paulgreg/Books"},t("Footer.codeOnGithub")),t("by"),o.a.createElement("a",{href:"https://paulgreg.me/"},"paulgreg")))))})),O=a(33);function S(e){var t=e.className,a=Object(O.a)().i18n,n=function(e){return a.changeLanguage(e)};return o.a.createElement("div",{className:t},o.a.createElement("button",{onClick:function(){return n("fr")}},"fr"),o.a.createElement("button",{onClick:function(){return n("en")}},"en"))}var j=function(){var e=Object(n.useState)(),t=Object(c.a)(e,2),a=t[0],i=t[1],r=Object(n.useState)([]),l=Object(c.a)(r,2),s=l[0],u=l[1];return Object(n.useEffect)((function(){(f?Promise.resolve(f.books):fetch("".concat(p,"/data/config.json")).then((function(e){return e.json()})).then((function(e){return(f=e).books}))).then((function(e){u(e);var t=function(e,t){return e.find((function(e){return e.id===t}))}(e,v("book"));t&&i(t)}))}),[]),o.a.createElement("div",{className:"App"},!a&&o.a.createElement(o.a.Fragment,null,o.a.createElement(S,{className:"App-LanguageSwitcher"}),o.a.createElement(L,null),o.a.createElement(h,{bookList:s,onBookClick:function(e){i(e),function(e){var t=e.id,a=e.title;window.history.pushState({},a,"?book=".concat(t))}(e)}}),o.a.createElement(x,null)),a&&o.a.createElement(o.a.Fragment,null,o.a.createElement(y,{title:a.title,onBackClick:function(){i(void 0),window.history.pushState({},"Livres","./")}}),o.a.createElement(E,{book:a})))},H=a(19),F=a(9),A=a(40),W=a(41),M=a(42);H.a.use(F.f).use(A.a).init({resources:{en:W,fr:M},fallbackLng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});H.a;var I=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function T(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(j,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/Books",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/Books","/service-worker.js");I?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):T(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):T(t,e)}))}}()},30:function(e,t,a){e.exports=a.p+"static/media/paypal.2b72ebe6.svg"},31:function(e,t,a){e.exports=a.p+"static/media/document_download.6e23317c.svg"},36:function(e){e.exports=JSON.parse('{"a":"/Books"}')},38:function(e,t,a){e.exports=a.p+"static/media/logo.afd007b9.svg"},39:function(e,t,a){e.exports=a.p+"static/media/arrow_left.bd85b495.svg"},41:function(e){e.exports=JSON.parse('{"translation":{"Header.title":"Books","Header.logo.at":"book","HeaderMinified.link.text":"Back to book list","HeaderMinified.icon.lat":"Back","Footer.title":"Attributions","Footer.icons":"icons","Footer.codeOnGithub":"Source code on github","by":" by ","BookList.epub.link.text":"download epub","BookList.epub.icon.alt":"download","BookList.donate.link.text":"donate via paypal","BookList.donate.icon.alt":"paypal","Chapter.title":"Chapter","Chapter.loading":"Loading chapter..."}}')},42:function(e){e.exports=JSON.parse('{"translation":{"Header.title":"Livres","Header.logo.at":"livre","HeaderMinified.link.text":"Retour \xe0 la liste des livres","HeaderMinified.icon.lat":"retour","Footer.title":"Remerciements","Footer.icons":"Ic\xf4nes","Footer.codeOnGithub":"Code source sur github","by":" par ","BookList.epub.link.text":"t\xe9l\xe9charger en epub","BookList.epub.icon.alt":"t\xe9l\xe9charger","BookList.donate.link.text":"faire un don avec paypal","BookList.donate.icon.alt":"paypal","Chapter.title":"Chapitre","Chapter.loading":"Chargement en cours"}}')},43:function(e,t,a){e.exports=a(145)},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},57:function(e,t,a){}},[[43,1,2]]]);
//# sourceMappingURL=main.528e81fb.chunk.js.map